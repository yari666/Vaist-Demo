<template>
    <a-popover v-model="visible" trigger="click" placement="right">
        <div class="colorpicker" slot="content">
            <div class="default">
                <span :style="'background: rgba(' + color + ')'"></span>
                <span class="btn">默认颜色</span>
            </div>
            <div class="theme">
                <span>主题颜色</span>
                <ul :class="showMore ? 'more' : ''">
                    <li
                        v-for="(item, index) in colorData"
                        :key="index"
                        :style="'background: rgba(' + item + ')'"
                        :class="colorIndex == index ? 'selected' : ''"
                        @click="pickColor(item, index)"
                    ></li>
                </ul>
                <p @click="more">{{ showMore ? "收起" : "更多颜色..." }}</p>
            </div>
        </div>
        <a-button type="primary" size="small"> 选择颜色 </a-button>
    </a-popover>
</template>

<script>
const VOC_COLORMAP = [
    [128, 0, 0],
    [0, 128, 0],
    [128, 128, 0],
    [0, 0, 128],
    [128, 0, 128],
    [0, 128, 128],
    [128, 128, 128],
    [64, 0, 0],
    [192, 0, 0],
    [64, 128, 0],
    [192, 128, 0],
    [64, 0, 128],
    [192, 0, 128],
    [64, 128, 128],
    [192, 128, 128],
    [0, 64, 0],
    [128, 64, 0],
    [0, 192, 0],
    [128, 192, 0],
    [0, 64, 128],
    [128, 64, 128],
    [0, 192, 128],
    [128, 192, 128],
    [64, 64, 0],
    [192, 64, 0],
    [64, 192, 0],
    [192, 192, 0],
    [64, 64, 128],
    [192, 64, 128],
    [64, 192, 128],
    [192, 192, 128],
    [0, 0, 64],
    [128, 0, 64],
    [0, 128, 64],
    [128, 128, 64],
    [0, 0, 192],
    [128, 0, 192],
    [0, 128, 192],
    [128, 128, 192],
    [64, 0, 64],
    [192, 0, 64],
    [64, 128, 64],
    [192, 128, 64],
    [64, 0, 192],
    [192, 0, 192],
    [64, 128, 192],
    [192, 128, 192],
    [0, 64, 64],
    [128, 64, 64],
    [0, 192, 64],
    [128, 192, 64],
    [0, 64, 192],
    [128, 64, 192],
    [0, 192, 192],
    [128, 192, 192],
    [64, 64, 64],
    [192, 64, 64],
    [64, 192, 64],
    [192, 192, 64],
    [64, 64, 192],
    [192, 64, 192],
    [64, 192, 192],
    [192, 192, 192],
    [32, 0, 0],
    [160, 0, 0],
    [32, 128, 0],
    [160, 128, 0],
    [32, 0, 128],
    [160, 0, 128],
    [32, 128, 128],
    [160, 128, 128],
    [96, 0, 0],
    [224, 0, 0],
    [96, 128, 0],
    [224, 128, 0],
    [96, 0, 128],
    [224, 0, 128],
    [96, 128, 128],
    [224, 128, 128],
    [32, 64, 0],
    [160, 64, 0],
    [32, 192, 0],
    [160, 192, 0],
    [32, 64, 128],
    [160, 64, 128],
    [32, 192, 128],
    [160, 192, 128],
    [96, 64, 0],
    [224, 64, 0],
    [96, 192, 0],
    [224, 192, 0],
    [96, 64, 128],
    [224, 64, 128],
    [96, 192, 128],
    [224, 192, 128],
    [32, 0, 64],
    [160, 0, 64],
    [32, 128, 64],
    [160, 128, 64],
    [32, 0, 192],
    [160, 0, 192],
    [32, 128, 192],
    [160, 128, 192],
    [96, 0, 64],
    [224, 0, 64],
    [96, 128, 64],
    [224, 128, 64],
    [96, 0, 192],
    [224, 0, 192],
    [96, 128, 192],
    [224, 128, 192],
    [32, 64, 64],
    [160, 64, 64],
    [32, 192, 64],
    [160, 192, 64],
    [32, 64, 192],
    [160, 64, 192],
    [32, 192, 192],
    [160, 192, 192],
    [96, 64, 64],
    [224, 64, 64],
    [96, 192, 64],
    [224, 192, 64],
    [96, 64, 192],
    [224, 64, 192],
    [96, 192, 192],
    [224, 192, 192],
    [0, 32, 0],
    [128, 32, 0],
    [0, 160, 0],
    [128, 160, 0],
    [0, 32, 128],
    [128, 32, 128],
    [0, 160, 128],
    [128, 160, 128],
    [64, 32, 0],
    [192, 32, 0],
    [64, 160, 0],
    [192, 160, 0],
    [64, 32, 128],
    [192, 32, 128],
    [64, 160, 128],
    [192, 160, 128],
    [0, 96, 0],
    [128, 96, 0],
    [0, 224, 0],
    [128, 224, 0],
    [0, 96, 128],
    [128, 96, 128],
    [0, 224, 128],
    [128, 224, 128],
    [64, 96, 0],
    [192, 96, 0],
    [64, 224, 0],
    [192, 224, 0],
    [64, 96, 128],
    [192, 96, 128],
    [64, 224, 128],
    [192, 224, 128],
    [0, 32, 64],
    [128, 32, 64],
    [0, 160, 64],
    [128, 160, 64],
    [0, 32, 192],
    [128, 32, 192],
    [0, 160, 192],
    [128, 160, 192],
    [64, 32, 64],
    [192, 32, 64],
    [64, 160, 64],
    [192, 160, 64],
    [64, 32, 192],
    [192, 32, 192],
    [64, 160, 192],
    [192, 160, 192],
    [0, 96, 64],
    [128, 96, 64],
    [0, 224, 64],
    [128, 224, 64],
    [0, 96, 192],
    [128, 96, 192],
    [0, 224, 192],
    [128, 224, 192],
    [64, 96, 64],
    [192, 96, 64],
    [64, 224, 64],
    [192, 224, 64],
    [64, 96, 192],
    [192, 96, 192],
    [64, 224, 192],
    [192, 224, 192],
    [32, 32, 0],
    [160, 32, 0],
    [32, 160, 0],
    [160, 160, 0],
    [32, 32, 128],
    [160, 32, 128],
    [32, 160, 128],
    [160, 160, 128],
    [96, 32, 0],
    [224, 32, 0],
    [96, 160, 0],
    [224, 160, 0],
    [96, 32, 128],
    [224, 32, 128],
    [96, 160, 128],
    [224, 160, 128],
    [32, 96, 0],
    [160, 96, 0],
    [32, 224, 0],
    [160, 224, 0],
    [32, 96, 128],
    [160, 96, 128],
    [32, 224, 128],
    [160, 224, 128],
    [96, 96, 0],
    [224, 96, 0],
    [96, 224, 0],
    [224, 224, 0],
    [96, 96, 128],
    [224, 96, 128],
    [96, 224, 128],
    [224, 224, 128],
    [32, 32, 64],
    [160, 32, 64],
    [32, 160, 64],
    [160, 160, 64],
    [32, 32, 192],
    [160, 32, 192],
    [32, 160, 192],
    [160, 160, 192],
    [96, 32, 64],
    [224, 32, 64],
    [96, 160, 64],
    [224, 160, 64],
    [96, 32, 192],
    [224, 32, 192],
    [96, 160, 192],
    [224, 160, 192],
    [32, 96, 64],
    [160, 96, 64],
    [32, 224, 64],
    [160, 224, 64],
    [32, 96, 192],
    [160, 96, 192],
    [32, 224, 192],
    [160, 224, 192],
    [96, 96, 64],
    [224, 96, 64],
    [96, 224, 64],
    [224, 224, 64],
    [96, 96, 192],
    [224, 96, 192],
    [96, 224, 192],
    [224, 224, 192],
];

export default {
    data() {
        return {
            colorData: VOC_COLORMAP,
            showMore: false,
            color: [255, 0, 0],
            colorIndex: -1,
            visible: false,
        };
    },
    methods: {
        more() {
            this.showMore = !this.showMore;
        },
        pickColor(item, index) {
            this.color = item;
            this.colorIndex = index;
            console.log(this.color);
        },
    },
};
</script>

<style lang="less" scoped>
.colorpicker {
    width: 262px;
    background: #fff;
    padding: 10px;
    border: 1px solid #dddddd;
    box-shadow: 0 0 3px #ddd;
    box-sizing: border-box;
    .default {
        overflow: hidden;
        span {
            display: block;
            float: left;
            width: 115px;
            height: 30px;
            line-height: 30px;
        }
        .btn {
            margin-left: 10px;
            text-align: center;
            box-sizing: border-box;
            border: 1px solid #dddddd;
        }
    }
    .theme {
        span {
            display: block;
            margin: 10px 0 5px;
        }
        ul {
            height: 170px;
            overflow: hidden;
            &.more {
                height: auto;
            }
        }
        li {
            float: left;
            width: 18px;
            height: 18px;
            margin: 3px;
            cursor: pointer;
            &.selected {
                border: 2px solid #000;
                box-shadow: 0 0 2px #000;
            }
        }
        p {
            display: block;
            width: 100%;
            border: 1px solid #dddddd;
            height: 28px;
            line-height: 28px;
            text-align: center;
            border-radius: 3px;
            margin: 0;
            cursor: pointer;
        }
    }
}
</style>